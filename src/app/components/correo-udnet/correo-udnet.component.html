<mat-card>
  <mat-card-header class="center-content blue-header" *ngIf="mostrarTabla1">
    <mat-card-title>{{ "solicitudes_correos.consulta_solicitudes" | translate }}</mat-card-title>
    <mat-card-subtitle>{{ "solicitudes_correos.resultados_solicitudes" | translate }}</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <div class="responsive-form" *ngIf="mostrarTabla1">
      <div class="form-item one-third-width">
        <mat-form-field class="form-field">
          <input matInput (keyup)="aplicarFiltro($event, 'tabla1')" placeholder="Buscar" #inputTabla1 />
        </mat-form-field>
      </div>
    </div>

    <div id="tabla1" [style.display]="mostrarTabla1 ? 'block' : 'none'">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z5">

        <ng-container matColumnDef="#">
          <mat-header-cell mat-header-cell *matHeaderCellDef>#</mat-header-cell> 
          <mat-cell mat-cell *matCellDef="let element; let i = index">{{ i + 1 }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="procesoAdminicion">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "solicitudes_correos.proceso_adminicion" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.procesoAdminicion }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="fecha">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "GLOBAL.fecha" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.fecha }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="estado">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "GLOBAL.estado" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.estado }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="gestion">
          <mat-header-cell mat-header-cell *matHeaderCellDef>Gestión</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">
            <button mat-icon-button (click)="onGestionClick(element.id)">
              <mat-icon>search</mat-icon>
            </button>
          </mat-cell>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>

    <mat-card-header class="center-content blue-header" *ngIf="!mostrarTabla1">
      <mat-card-title>{{ "solicitudes_correos.listado" | translate }}</mat-card-title>
      <mat-card-subtitle>{{ "solicitudes_correos.resultados_solicitudes" | translate }}</mat-card-subtitle>
    </mat-card-header>

    <div id="tabla2" [style.display]="mostrarTabla1 ? 'none' : 'block'">
      <div class="responsive-form">
        <div class="form-item one-third-width">
          <mat-form-field class="form-field">
            <input matInput (keyup)="aplicarFiltro($event, 'tabla2')" placeholder="Buscar" #inputTabla2 />
          </mat-form-field>
        </div>
      </div>
      <table mat-table [dataSource]="dataSource2">
        <!-- Column Definitions -->
        <ng-container matColumnDef="facultad">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "soporte.facultad" | translate }}</mat-header-cell> 
          <mat-cell mat-cell *matCellDef="let element">{{ element.facultad }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="codigo">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "soporte.codigo" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.codigo }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="numeroDocumento">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "solicitudes_correos.numero_documento" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.numeroDocumento }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="primerNombre">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "GLOBAL.primer_nombre" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.primerNombre }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="segundoNombre">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "GLOBAL.segundo_nombre" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.segundoNombre }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="primerApellido">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "GLOBAL.primer_apellido" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.primerApellido }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="segundoApellido">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "GLOBAL.segundo_apéllido" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.segundoApellido }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="correoPersonal">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "solicitudes_correos.correo_personal" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.correoPersonal }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="telefono">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "GLOBAL.telefono" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.telefono }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="usuarioAsignado">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "solicitudes_correos.usuario_asginado" | translate }}</mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element">{{ element.usuarioAsignado }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="correoAsignado">
          <mat-header-cell mat-header-cell *matHeaderCellDef>{{ "solicitudes_correos.correo_asginado" | translate }}</mat-header-cell> 
          <mat-cell mat-cell *matCellDef="let element">{{ element.correoAsignado }}</mat-cell>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns2"></tr>
      </table>
      <mat-paginator #paginator2 [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
      
      <button mat-fab class="float-button" (click)="mostrarTabla('tabla1')">
        <mat-icon>arrow_back</mat-icon>
      </button>
    </div>
    <mat-paginator class="paginacion" [pageSize]="10"></mat-paginator>
  </mat-card-content>

  <div *ngIf="!mostrarTabla1" class="observaciones" style="margin: 20px 0; border: 1px solid black; padding: 10px;">
    <h3>{{ "GLOBAL.observaciones" | translate }}</h3>
    <textarea rows="4" style="width: 100%; border: 1px solid black;"></textarea>
  </div>

  <mat-card-actions *ngIf="!mostrarTabla1">
    <div class="container-bottons">
      <button mat-flat-button color="warn" (click)="descargarCSV()">
        {{ "solicitudes_correos.descargar_listado" | translate }}
      </button>
      <button mat-flat-button color="accent" (click)="inputFile.click()">
        {{ "solicitudes_correos.cargar_listado" | translate }}
        <input #inputFile type="file" (change)="cargarCSV($event)" accept=".csv" style="display: none;">
      </button>
      <button mat-flat-button color="primary" (click)="confirmarGestion()">
        {{ "solicitudes_correos.confirmar_gestion" | translate }}
      </button>
    </div>
  </mat-card-actions>
</mat-card>
